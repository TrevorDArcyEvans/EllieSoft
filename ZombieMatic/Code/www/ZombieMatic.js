
  var Sounds =  [
"20342__corpsehere__Zombieme.mp3",
"20343__corpsehere__zombieme2.mp3",
"63622_vtownpunks_Groan_1.mp3",
"63623_vtownpunks_Groan_2.mp3",
"63624_vtownpunks_Groan_3_01.mp3",
"63624_vtownpunks_Groan_3_02.mp3",
"63624_vtownpunks_Groan_3_03.mp3",
"63624_vtownpunks_Groan_3_04.mp3",
"63624_vtownpunks_Groan_3_05.mp3",
"63624_vtownpunks_Groan_3_06.mp3",
"63624_vtownpunks_Groan_3_07.mp3",
"63624_vtownpunks_Groan_3_08.mp3",
"63624_vtownpunks_Groan_3_09.mp3",
"63624_vtownpunks_Groan_3_10.mp3",
"63624_vtownpunks_Groan_3_11.mp3",
"63625_vtownpunks_Groan_4.mp3",
"63626_vtownpunks_Groan_5.mp3",
"63627_vtownpunks_Groan_6_01.mp3",
"63627_vtownpunks_Groan_6_02.mp3",
"63627_vtownpunks_Groan_6_03.mp3",
"63627_vtownpunks_Groan_6_04.mp3",
"63627_vtownpunks_Groan_6_05.mp3",
"63627_vtownpunks_Groan_6_06.mp3",
"63627_vtownpunks_Groan_6_07.mp3",
"63628_vtownpunks_Groan_7.mp3",
"63629_vtownpunks_Groan_8.mp3",
"63630_vtownpunks_Multi_Groan_1.mp3",
"63631_vtownpunks_Multi_Groan_2.mp3",
"63632_vtownpunks_Scream07.mp3",
"63633_vtownpunks_Scream09.mp3",
"63634_vtownpunks_Scream03.mp3",
"63635_vtownpunks_Scream04.mp3",
"63636_vtownpunks_Scream10.mp3",
"63637_vtownpunks_Scream02.mp3",
"63638_vtownpunks_Scream05.mp3",
"63639_vtownpunks_Scream06.mp3",
"63640_vtownpunks_Scream08.mp3",
"63641_vtownpunks_Scream01.mp3",
"66131_Robinhood76_05.mp3",
"66132_Robinhood76_05.mp3",
"66133_Robinhood76_01.mp3",
"66134_Robinhood76_02.mp3",
"66494_Robinhood76_04.mp3",
"66539_Robinhood76_06.mp3",
"66574_Robinhood76_11.mp3",
"66633_Robinhood76_10.mp3",
"66642_Robinhood76_16.mp3",
"66645_Robinhood76_08.mp3",
"66714_Robinhood76_09.mp3",
"66725_Robinhood76_12.mp3",
"72717__shawshank73__BRAINS.mp3",
"72727_Timbre_Shawshank73_BRAINS_zombiefied.mp3",
"72728_Timbre_Shawshank73_BRAINS_zombiefied_2.mp3",
"75522_Robinhood76_17.mp3",
"75523_Robinhood76_18.mp3",
"75524_Robinhood76_13.mp3",
"75525_Robinhood76_14.mp3",
"76773__Vosvoy__zombie-02.mp3",
"76773__Vosvoy__zombie-03.mp3",
"76773__Vosvoy__zombie-04.mp3",
"76773__Vosvoy__zombie-05.mp3",
"76773__Vosvoy__zombie-06.mp3",
"76773__Vosvoy__zombie-07.mp3",
"76773__Vosvoy__zombie-08.mp3",
"76773__Vosvoy__zombie-09.mp3",
"76773__Vosvoy__zombie-10.mp3",
"76773__Vosvoy__zombie-11.mp3",
"76773__Vosvoy__zombie-12.mp3",
"76773__Vosvoy__zombie-13.mp3",
"76773__Vosvoy__zombie-14.mp3",
"76773__Vosvoy__zombie-15.mp3",
"76773__Vosvoy__zombie-16.mp3",
"76773__Vosvoy__zombie-17.mp3",
"76773__Vosvoy__zombie-18.mp3",
"76773__Vosvoy__zombie-19.mp3",
"76773__Vosvoy__zombie-20.mp3",
"76773__Vosvoy__zombie-21.mp3",
"76773__Vosvoy__zombie-22.mp3",
"76773__Vosvoy__zombie-23.mp3",
"76773__Vosvoy__zombie-24.mp3",
"76773__Vosvoy__zombie-25.mp3",
"76773__Vosvoy__zombie-26.mp3",
"76773__Vosvoy__zombie-27.mp3",
"76773__Vosvoy__zombie-28.mp3",
"76773__Vosvoy__zombie-29.mp3",
"76773__Vosvoy__zombie-30.mp3",
"76773__Vosvoy__zombie-31.mp3",
"76773__Vosvoy__zombie-32.mp3",
"76773__Vosvoy__zombie-33.mp3",
"76773__Vosvoy__zombie-34.mp3",
"76773__Vosvoy__zombie-35.mp3",
"76773__Vosvoy__zombie-36.mp3",
"76773__Vosvoy__zombie-37.mp3",
"76773__Vosvoy__zombie-38.mp3",
"76773__Vosvoy__zombie-39.mp3",
"76773__Vosvoy__zombie-40.mp3",
"76773__Vosvoy__zombie-41.mp3",
"76773__Vosvoy__zombie-42.mp3",
"76773__Vosvoy__zombie-43.mp3",
"76773__Vosvoy__zombie-44.mp3",
"76773__Vosvoy__zombie-45.mp3",
"76773__Vosvoy__zombie-46.mp3",
"76773__Vosvoy__zombie-47.mp3",
"76773__Vosvoy__zombie-48.mp3",
"76773__Vosvoy__zombie-49.mp3",
"76773__Vosvoy__zombie-50.mp3",
"76773__Vosvoy__zombie-51.mp3",
"76773__Vosvoy__zombie-52.mp3",
"76773__Vosvoy__zombie-53.mp3",
"76773__Vosvoy__zombie-54.mp3",
"76773__Vosvoy__zombie-55.mp3",
"76773__Vosvoy__zombie-56.mp3",
"76773__Vosvoy__zombie-57.mp3",
"76773__Vosvoy__zombie-58.mp3",
"76773__Vosvoy__zombie-59.mp3",
"76773__Vosvoy__zombie-60.mp3",
"76773__Vosvoy__zombie-61.mp3",
"76773__Vosvoy__zombie-62.mp3",
"76773__Vosvoy__zombie-63.mp3",
"76773__Vosvoy__zombie-64.mp3",
"76773__Vosvoy__zombie-65.mp3",
"76773__Vosvoy__zombie-66.mp3",
"76773__Vosvoy__zombie-67.mp3",
"76773__Vosvoy__zombie-68.mp3",
"76773__Vosvoy__zombie-69.mp3",
"76773__Vosvoy__zombie-70.mp3",
"76773__Vosvoy__zombie-71.mp3",
"76773__Vosvoy__zombie-72.mp3",
"76773__Vosvoy__zombie-73.mp3",
"86247_Timbre_Raging_madman_zombie_beast_3e_reverse_reverb_.mp3",
"94166_Robinhood76_15.mp3",
"94281_Robinhood76_03.mp3",
"94589_Robinhood76_07.mp3",
"97192_Robinhood76_20.mp3",
"97311_Robinhood76_21.mp3",
"97315_Robinhood76_19.mp3",

                ];
                
  var HasInitialised = false;
  var Html5AudioAvailable = false;

  // If you want to prevent dragging, uncomment this section
  /*
  function preventBehavior(e)
  {
      e.preventDefault();
    };
  document.addEventListener("touchmove", preventBehavior, false);
  */
  
  function preventBehavior(e) 
	{ 
      e.preventDefault(); 
  };
  
  function onBodyLoad()
  {
    // prevent dragging
    document.addEventListener("touchmove", preventBehavior, false);
    
    document.addEventListener("deviceready", onDeviceReady, false);
    
    init();
  }

  /* When this function is called, PhoneGap has been initialized and is ready to roll */
  function onDeviceReady()
  {
    // do your thing!
    init();
    
    watchForShake(1.25);
  }

  function $(id)
  {
    return document.getElementById(id);
  }

  function init()
  {
    if (HasInitialised)
    {
      return;
    }
    
    // TODO   init
    
    // this is the recommended way to detect HTML5 audio support
    //Html5AudioAvailable = !!document.createElement('audio').canPlayType;
    
    // FFS!   Mobile WebKit on iPhone doesn't support HTML5 audio
    //        even though it says it does - fÂ£$%^&g Apple,
    //        so we have to examine the browser OS
    Html5AudioAvailable = ("iPhone/iPod" != BrowserDetect.OS);

    HasInitialised = true;
  }
  
  function watchForShake(threshold)
  {
    var axl = new Accelerometer(); 

    axl.watchAcceleration
    (
      function (Accel)
      {
        if (true === Accel.is_updating)
        {
          return;
        }

        if (Accel.x >= threshold || Accel.x <= (0 - threshold) ||
            Accel.y >= threshold || Accel.y <= (0 - threshold))
        {
          PlayRandomSound();
        }
      }
      , function(){}
      , {frequency : 500}
    );
  }

  function PlaySound(SoundPath)
  {
    //debug.log(BrowserDetect.OS + " / " + BrowserDetect.browser);
    //debug.log("Playing " + SoundPath);
    
    if (Html5AudioAvailable)
    {
      //debug.log("  using HTML5");
      var ThisSound = new Audio(SoundPath);
      ThisSound.play()
    }
    else
    {
      // use PhoneGap sound
      //debug.log("  using PhoneGap");
      new Media(SoundPath).play();
    }
    //debug.log("  Played " + SoundPath);
  }
  
  function PlayRandomSound()
  {
    var index = Math.floor(Math.random() * (Sounds.length + 1));
    var SoundPath = "Sounds/" + Sounds[index];
    PlaySound(SoundPath);
  }
  
var BrowserDetect =
{
	init: function ()
  {
		this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
		this.version = this.searchVersion(navigator.userAgent)
			|| this.searchVersion(navigator.appVersion)
			|| "an unknown version";
		this.OS = this.searchString(this.dataOS) || "an unknown OS";
	},
	searchString: function (data)
  {
		for (var i=0;i<data.length;i++)
    {
			var dataString = data[i].string;
			var dataProp = data[i].prop;
			this.versionSearchString = data[i].versionSearch || data[i].identity;
			if (dataString)
      {
				if (dataString.indexOf(data[i].subString) != -1)
        {
					return data[i].identity;
        }
			}
			else if (dataProp)
      {
				return data[i].identity;
      }
		}
	},
	searchVersion: function (dataString)
  {
		var index = dataString.indexOf(this.versionSearchString);
		if (index == -1)
    {
      return;
    }
		return parseFloat(dataString.substring(index + this.versionSearchString.length + 1));
	},
	dataBrowser: [
		{
			string: navigator.userAgent,
			subString: "Chrome",
			identity: "Chrome"
		},
		{ 	string: navigator.userAgent,
			subString: "OmniWeb",
			versionSearch: "OmniWeb/",
			identity: "OmniWeb"
		},
		{
			string: navigator.vendor,
			subString: "Apple",
			identity: "Safari",
			versionSearch: "Version"
		},
		{
			prop: window.opera,
			identity: "Opera"
		},
		{
			string: navigator.vendor,
			subString: "iCab",
			identity: "iCab"
		},
		{
			string: navigator.vendor,
			subString: "KDE",
			identity: "Konqueror"
		},
		{
			string: navigator.userAgent,
			subString: "Firefox",
			identity: "Firefox"
		},
		{
			string: navigator.vendor,
			subString: "Camino",
			identity: "Camino"
		},
		{		// for newer Netscapes (6+)
			string: navigator.userAgent,
			subString: "Netscape",
			identity: "Netscape"
		},
		{
			string: navigator.userAgent,
			subString: "MSIE",
			identity: "Explorer",
			versionSearch: "MSIE"
		},
		{
			string: navigator.userAgent,
			subString: "Gecko",
			identity: "Mozilla",
			versionSearch: "rv"
		},
		{ 		// for older Netscapes (4-)
			string: navigator.userAgent,
			subString: "Mozilla",
			identity: "Netscape",
			versionSearch: "Mozilla"
		}
	],
	dataOS : [
		{
			string: navigator.platform,
			subString: "Win",
			identity: "Windows"
		},
		{
			string: navigator.platform,
			subString: "Mac",
			identity: "Mac"
		},
		{
			   string: navigator.userAgent,
			   subString: "iPhone",
			   identity: "iPhone/iPod"
	    },
		{
			string: navigator.platform,
			subString: "Linux",
			identity: "Linux"
		}
	]

};
  BrowserDetect.init();
